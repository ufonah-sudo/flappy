<!DOCTYPE html>
<html lang="ru">
<head>
    <!-- Кодировка UTF-8, чтобы корректно отображались все символы -->
    <meta charset="UTF-8">

    <!-- 
        КЛЮЧЕВОЙ viewport:
        - width=device-width → ширина равна ширине экрана
        - initial-scale=1.0 → без масштабирования
        - maximum/minimum=1.0 → запрещаем зум
        - user-scalable=no → отключаем ручной зум
        - viewport-fit=cover → разрешаем контент под вырезы (iPhone)
    -->
    <meta name="viewport"
          content="width=device-width,
                   initial-scale=1.0,
                   maximum-scale=1.0,
                   minimum-scale=1.0,
                   user-scalable=no,
                   viewport-fit=cover">

    <!-- Разрешает веб-приложению работать как нативное (iOS) -->
    <meta name="apple-mobile-web-app-capable" content="yes">

    <!-- Делает статус-бар прозрачным (iOS) -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Отключает авто-детект телефонов -->
    <meta name="format-detection" content="telephone=no">

    <!-- Заголовок страницы -->
    <title>Flappy Bird TON</title>

    <!-- Базовые стили (обязательно должны содержать html, body { height:100% }) -->
    <link rel="stylesheet" href="/css/base.css">

    <!-- Основные стили твоей игры -->
    <link rel="stylesheet" href="/frontend/style.css">

    <!-- Telegram WebApp API (ОБЯЗАТЕЛЬНО для fullscreen) -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- TON Connect UI -->
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>

    <!-- ВСТРОЕННЫЕ КРИТИЧЕСКИЕ СТИЛИ ДЛЯ FULLSCREEN -->
    <style>
        /* Растягиваем страницу на 100% экрана */
        html, body {
            margin: 0;              /* убираем стандартные отступы */
            padding: 0;             /* убираем стандартные отступы */
            width: 100%;            /* ширина = ширине экрана */
            height: 100%;           /* высота = высоте экрана */
            overflow: hidden;       /* запрещаем скролл */
            background: #000;       /* чёрный фон (как в играх) */
        }

        /* Главный контейнер приложения */
        #app {
            position: fixed;        /* фиксируем к экрану */
            inset: 0;               /* top:0 right:0 bottom:0 left:0 */
            width: 100vw;           /* 100% ширины viewport */
            height: 100vh;          /* 100% высоты viewport */

            /* Safe-area для iPhone (чёлка, жесты) */
            padding:
                env(safe-area-inset-top)
                env(safe-area-inset-right)
                env(safe-area-inset-bottom)
                env(safe-area-inset-left);
        }

        /* Canvas всегда на весь экран */
        canvas {
            display: block;         /* убираем inline-отступы */
        }
    </style>
</head>

<body>

    <!-- Фон с облаками -->
    <div id="clouds-container" class="sky-container">
        <img src="/frontend/assets/cloud1.png" class="cloud cloud1" alt="">
        <img src="/frontend/assets/cloud2.png" class="cloud cloud2" alt="">
        <img src="/frontend/assets/cloud3.png" class="cloud cloud3" alt="">
        <img src="/frontend/assets/cloud4.png" class="cloud cloud4" alt="">
        <img src="/frontend/assets/cloud5.png" class="cloud cloud5" alt="">
        <img src="/frontend/assets/cloud6.png" class="cloud cloud6" alt="">
    </div>

    <!-- ГЛАВНЫЙ КОНТЕЙНЕР ПРИЛОЖЕНИЯ -->
    <div id="app">

        <!-- ВЕСЬ ТВОЙ ИНТЕРФЕЙС — БЕЗ ИЗМЕНЕНИЙ -->
        <!-- (я его не трогал, потому что проблема была НЕ В НЁМ) -->

        <!-- ... твой код интерфейса ... -->

        <!-- Canvas игры -->
        <canvas id="game-canvas"></canvas>

    </div>

    <!-- Основная логика игры -->
    <script type="module" src="/main.js"></script>

    <!-- ИНИЦИАЛИЗАЦИЯ TELEGRAM FULLSCREEN -->
    <script>
        const tg = window.Telegram.WebApp;

        // Говорим Telegram: приложение готово
        tg.ready();

        // РАСКРЫВАЕМ НА ВЕСЬ ЭКРАН (КЛЮЧЕВАЯ СТРОКА)
        tg.expand();

        // Убираем свайпы вниз (чтобы не закрывали игру)
        tg.disableVerticalSwipes();

        // Устанавливаем цвет фона Telegram
        tg.setBackgroundColor('#000000');
    </script>

</body>
</html>
